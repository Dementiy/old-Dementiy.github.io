---
layout: post
title: –õ–µ–∫—Ü–∏—è 01. –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö
categories: python –ª–µ–∫—Ü–∏–∏
comments: true
---

–≠—Ç–∞ –ª–µ–∫—Ü–∏—è –ø–æ—Å–≤—è—â–µ–Ω–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—é –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫: —á–∏—Å–ª–∞, —Å—Ç—Ä–æ–∫–∏, —Å–ø–∏—Å–∫–∏, –∫–æ—Ä—Ç–µ–∂–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∏ —Å–ª–æ–≤–∞—Ä–∏. –†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –≤–Ω—Ç—É—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ç–∏–ø–æ–≤, –∞ —Ç–∞–∫–∂–µ ¬´—Ä–æ–¥–∏—Ç–µ–ª—è¬ª –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ - —Å—Ç—Ä—É–∫—Ç—É—Ä—ã `PyObject`. –ù–∞ –≤–æ–ø—Ä–æ—Å ¬´–ó–∞—á–µ–º?¬ª, –º–æ–∂–Ω–æ –æ—Ç–≤–µ—Ç–∏—Ç—å, —á—Ç–æ –≤–æ-–ø–µ—Ä–≤—ã—Ö, Python —Å–∫—Ä—ã–≤–∞–µ—Ç ¬´—Å—Ç–æ–∏–º–æ—Å—Ç—å¬ª –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –æ–ø–µ—Ä–∞—Ü–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, ¬´–°–∫–æ–ª—å–∫–æ –ø–∞–º—è—Ç–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π?¬ª. –¢–∞–∫, –º–∞—Å—Å–∏–≤ –∏–∑ —Ç—ã—Å—è—á–∏ –Ω–µ–±–æ–ª—å—à–∏—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª –Ω–∞ 4 –∫–∏–ª–æ–±–∞–π—Ç–∞ ¬´—Ç—è–∂–µ–ª–µ–µ¬ª —á–µ–º –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –º–∞—Å—Å–∏–≤ –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∏—Å–µ–ª; –º–∞—Å—Å–∏–≤ –Ω—É–ª–µ–π —Ç—Ä–µ–±—É–µ—Ç –º–µ–Ω—å—à–µ –ø–∞–º—è—Ç–∏, —á–µ–º –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã–π –ø–æ –¥–ª–∏–Ω–µ –º–∞—Å—Å–∏–≤ –ª—é–±—ã—Ö –¥—Ä—É–≥–∏—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª –∏ —Ç.–¥. –í–æ-–≤—Ç–æ—Ä—ã—Ö, –∫–æ–≥–¥–∞ Python –∫–∞–∂–µ—Ç—Å—è –Ω–∞–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–º, —Ç–æ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ numpy, –∏–ª–∏ –ø–∏—à–µ–º –°–∏-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è, –∞ —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–∏—Å–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–Ω–∏–º–∞—Ç—å [Python/C API](https://docs.python.org/3/c-api/index.html).

<script type="text/javascript" async
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>

### ¬´Everything is an Object¬ª

–í Python –≤—Å–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º: —á–∏—Å–ª–∞, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Ñ—É–Ω–∫—Ü–∏–∏, –∫–ª–∞—Å—Å—ã, –º–æ–¥—É–ª–∏ –∏ —Ç.–¥. –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –æ–±–ª–∞–¥–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º, –∫–æ—Ç–æ—Ä—ã–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞ (–≤ CPython –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–º –æ–±—ä–µ–∫—Ç–∞ —è–≤–ª—è–µ—Ç—Å—è –µ–≥–æ –∞–¥—Ä–µ—Å –≤ –ø–∞–º—è—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ `id()`), —Ç–∏–ø–æ–º, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç ¬´—á–µ–º —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç¬ª (—á–∏—Å–ª–æ–º, —Å—Ç—Ä–æ–∫–æ–π, —Å–ø–∏—Å–∫–æ–º –∏ —Ç.–¥.) –∏ –∫–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –Ω–∏–º –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å, –∞ —Ç–∞–∫–∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ–º.

–ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç ¬´–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è¬ª –æ—Ç –°–∏-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã [`PyObject`](https://github.com/python/cpython/blob/master/Include/object.h#L106) –∏–ª–∏ `PyVarObject` –¥–ª—è –æ–±—ä–µ–∫—Ç–æ–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (variable) –¥–ª–∏–Ω–Ω—ã (—Å—Ç—Ä–æ–∫–∏, —Å–ø–∏—Å–∫–∏ –∏ —Ç.–¥.):

```c
typedef struct _object {
    _PyObject_HEAD_EXTRA
    Py_ssize_t ob_refcnt;
    struct _typeobject *ob_type;
} PyObject;
```

–ì–¥–µ:

 - `_PyObject_HEAD_EXTRA` - –º–∞–∫—Ä–æ—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–≤–∞ –ø–æ–ª—è `_ob_next` –∏ `_ob_prev` - —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ–±—ä–µ–∫—Ç—ã, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –ë—É–¥—É—Ç –ª–∏ —ç—Ç–∏ –ø–æ–ª—è –≤–∫–ª—é—á–µ–Ω—ã –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `PyObject` –∏–ª–∏ –Ω–µ—Ç - –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ñ–ª–∞–≥–∞ `Py_TRACE_REFS`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω;
 - `ob_refcnt` - —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ –Ω–∞ –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –∏–ª–∏ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è, –ø—Ä–∏ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–∏ –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–∏ —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ –æ–±—ä–µ–∫—Ç; –∫–æ–≥–¥–∞ —Å—á–µ—Ç—á–∏–∫ —Å—Å—ã–ª–æ–∫ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç –Ω—É–ª—è, —Ç–æ –æ–±—ä–µ–∫—Ç —É–¥–∞–ª—è–µ—Ç—Å—è. –ü—Ä–æ –ø–æ–¥—Å—á–µ—Ç —Å—Å—ã–ª–æ–∫ –∏ ¬´—Å–±–æ—Ä–∫—É –º—É—Å–æ—Ä–∞¬ª –º—ã –±—É–¥–µ–º –≥–æ–≤–æ—Ä–∏—Ç—å –≤ –æ–¥–Ω–æ–π –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –ª–µ–∫—Ü–∏–π;
 - `ob_type` - —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É [`_typeobject`](https://docs.python.org/3/c-api/typeobj.html), –∫–æ—Ç–æ—Ä–∞—è –∑–∞–¥–∞–µ—Ç —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞ (–±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–± —ç—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –º—ã –±—É–¥–µ–º –≥–æ–≤–æ—Ä–∏—Ç—å –≤ –ª–µ–∫—Ü–∏–∏ ¬´–°–∏-—Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è¬ª).

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ `PyVarObject` –≤–∫–ª—é—á–∞–µ—Ç –æ–¥–Ω–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `ob_size` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –æ–±—ä–µ–∫—Ç–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–ø–∏—Å–∫–∞ –∏–∑ –ø—è—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ `ob_size` –±—É–¥–µ—Ç —Ä–∞–≤–µ–Ω 5):

```c
typedef struct {
    PyObject ob_base;
    Py_ssize_t ob_size; /* Number of items in variable part */
} PyVarObject;
```

–ò—Ç–∞–∫, –µ—Å–ª–∏ –≤—ã —Ä–µ—à–∏–ª–∏ –≤–≤–µ—Å—Ç–∏ —Å–≤–æ–π —Ç–∏–ø, —Ç–æ –æ–Ω –¥–æ–ª–∂–µ–Ω ¬´–Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å—Å—è¬ª –æ—Ç `PyObject` –∏–ª–∏ `PyVarObject` —Å –ø–æ–º–æ—â—å—é –º–∞–∫—Ä–æ—Å–æ–≤ `PyObject_HEAD` –∏ `PyObject_VAR_HEAD`:

```c
#define PyObject_HEAD          PyObject ob_base;
...
#define PyObject_VAR_HEAD      PyVarObject ob_base;
```

–ù–∞–ø—Ä–∏–º–µ—Ä:

```c
typedef struct _myobject {
       PyObject_HEAD
       ...
} PyMyObject;
```

–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, `PyMyObject` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ –ø–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å –≤ `PyObject`.

–°–ª–µ–¥—É–µ—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –º–∞–∫—Ä–æ—Å `PyObject_HEAD` –¥–æ–ª–∂–Ω–µ–Ω –∏–¥—Ç–∏ –ø–µ—Ä–≤—ã–º –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ. –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å ¬´–Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º¬ª, –æ –∫–æ—Ç–æ—Ä–æ–º –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å —Ä–∞–Ω–µ–µ. –ö–∞–∫ —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç—Å—è –≤ [`object.h`](https://github.com/python/cpython/blob/master/Include/object.h#L40):

> Objects are always accessed through pointers of the type `PyObject *`

–∏ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è (casting) —É–∫–∞–∑–∞—Ç–µ–ª—è –Ω–∞ `PyMyObject` –∫ —É–∫–∞–∑–∞—Ç–µ–ª—é –Ω–∞ `PyObject`, —Ç–æ –µ—Å—Ç—å:

```c
PyObject *obj = (PyObject*)my_py_type_variable;
```

–ú—ã –≤–∫—Ä–∞—Ç—Ü–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –Ω–∞–∏–±–æ–ª–µ–µ –æ–±—â–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ CPython, –Ω–æ –ø–æ–∫–∞ –Ω–µ –≥–æ–≤–æ—Ä–∏–ª–∏ –æ —Ç–æ–º –∫–∞–∫ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã. –í –æ–¥–Ω–æ–π –∏–∑ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ª–µ–∫—Ü–∏–π –º—ã –≤–µ—Ä–Ω–µ–º—Å—è –∫ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É. –î–∞–ª–µ–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∏–∑ –Ω–∏—Ö.

### –¶–µ–ª–æ—á–∏—Å–ª–µ–Ω–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∏ —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π

–ë–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ —è–∑—ã–∫–∞ –Ω–∞–º –¥–æ—Å—Ç—É–ø–Ω—ã —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ (int), –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —á–∏—Å–ª–∞ (float) –∏ –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ —á–∏—Å–ª–∞ (complex).

<div class="admonition legend">
  <p class="first admonition-title"><strong>–ó–∞–º–µ—á–∞–Ω–∏–µ</strong></p>
  <p class="last">–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è name binding, —Ç–æ –µ—Å—Ç—å —Å–≤—è–∑—ã–≤–∞–Ω–∏–µ –∏–º–µ–Ω–∏ —Å –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –æ–±—ä–µ–∫—Ç–æ–º, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –∏–º–µ–Ω–µ–º –≤—ã—Å—Ç—É–ø–∞–µ—Ç <code>year</code>, –∞ –æ–±—ä–µ–∫—Ç–æ–º —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ <code>2018</code>.</p>
</div>

```python
>>> year = 2018
>>> year
2018
>>> type(year)
int
>>> type(2018)
int
```

–£ –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –æ–±—ã—á–Ω–æ –µ—Å—Ç—å ¬´–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä¬ª:

```python
>>> zero = int()
>>> zero
0
>>> zero = float()
>>> zero
0.0
```

–û—Å–Ω–æ–≤–Ω—ã–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:

```python
>>> year + 1
2019
>>> year - 1
2017
>>> year * 12
24216
>>> year * 365.25
737074.5
>>> year / 100
20.18
```

–í–∑—è—Ç–∏–µ —Ü–µ–ª–æ–π —á–∞—Å—Ç–∏ –∏ –æ—Å—Ç–∞—Ç–∫–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏—è:
```python
>>> year // 100
20
>>> year % 100
18
```

–î–ª—è –∑–∞–ø–∏—Å–∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –∏–ª–∏ –æ—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∏—Ö —á–∏—Å–µ–ª —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—É—é —Ñ–æ—Ä–º—É –∑–∞–ø–∏—Å–∏ —á–∏—Å–µ–ª. –°—Ä–∞–≤–Ω–∏—Ç–µ:

```python
>>> 2.018 * 10**3
2017.9999999999998
>>> 2.018E3
2018.0
```

–ò –Ω–µ —Å—Ç–æ–∏—Ç –∑–∞–±—ã–≤–∞—Ç—å –ø—Ä–æ [–æ—à–∏–±–∫–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏—è](https://floating-point-gui.de/errors/rounding/) –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏:

```python
>>> 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1
0.9999999999999999
```

### –î–ª–∏–Ω–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞ –≤ Python

<div class="admonition legend">
  <p class="first admonition-title"><strong>–ó–∞–º–µ—á–∞–Ω–∏–µ</strong></p>
  <p class="last">–ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –ø—Ä–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª –≤–∑—è—Ç–∞ –∏–∑ —Å—Ç–∞—Ç—å–∏ –ê—Ä—Ç–µ–º–∞ –ì–æ–ª—É–±–∏–Ω–∞: <a href="https://rushter.com/blog/python-integer-implementation/">Python Integer Implementation</a>.</p>
</div>

–ú–æ–∂–µ—Ç –ª–∏ –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ü–µ–ª—ã–º–∏ —á–∏—Å–ª–∞–º–∏ –≤ Python? –ù–µ—Ç, –µ—Å–ª–∏ –º—ã **–Ω–µ** –≥–æ–≤–æ—Ä–∏–º –æ —Ç–∞–∫–∏—Ö –ø–∞–∫–µ—Ç–∞—Ö –∫–∞–∫ Numpy –∏ Pandas, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ü–µ–ª—ã–º–∏ —á–∏—Å–ª–∞–º–∏ –≤ Python –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [–¥–ª–∏–Ω–Ω–∞—è –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–∞](https://ru.wikipedia.org/wiki/%D0%94%D0%BB%D0%B8%D0%BD%D0%BD%D0%B0%D1%8F_%D0%B0%D1%80%D0%B8%D1%84%D0%BC%D0%B5%D1%82%D0%B8%D0%BA%D0%B0).

–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª:

```c
struct _longobject {
    PyObject_VAR_HEAD
    digit ob_digit[1];
} PyLongObject;
```

–ï—Å–ª–∏ ¬´—Ä–∞—Å–∫—Ä—ã—Ç—å¬ª –º–∞–∫—Ä–æ—Å `PyObject_VAR_HEAD`, —Ç–æ —Å—Ç—É—Ä–∫—Ç—É—Ä–∞ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

<div class="admonition legend">
  <p class="first admonition-title"><strong>–ó–∞–º–µ—á–∞–Ω–∏–µ</strong></p>
  <p class="last">–í—ã –¥–æ–ª–∂–Ω—ã –±—ã–ª–∏ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ <code>PyLongObject</code> ¬´–Ω–∞—Å–ª–µ–¥—É–µ—Ç—Å—è¬ª –æ—Ç <code>PyVarObject</code>, —Ç–æ –µ—Å—Ç—å —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª–∏–Ω—ã, –∏, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –≤–∫–ª—é—á–∞–µ—Ç –ø–æ–ª–µ <code>ob_size</code>, –∫–æ—Ç–æ—Ä–æ–µ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ <code>ob_digit</code>.</p>
</div>

```c
struct _longobject {
    ssize_t ob_refcnt;
    struct _typeobject *ob_type;
    ssize_t ob_size; 
    uint32_t ob_digit[1];
} PyLongObject;
```

–í—Å–µ –ø–æ–ª—è –≤–∞–º —É–∂–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–Ω–∞–∫–æ–º—ã, `PyLongObject` –¥–æ–±–∞–≤–ª—è–µ—Ç –ª–∏—à—å –æ–¥–Ω–æ –Ω–æ–≤–æ–µ –ø–æ–ª–µ `ob_digit` - –º–∞—Å—Å–∏–≤ –±–µ–∑–∑–Ω–∞–∫–æ–≤—ã—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª –ø–æ –æ—Å–Ω–æ–≤–∞–Ω–∏—é $$2^{30}$$. –î–∞–≤–∞–π—Ç–µ —Ä–∞–∑–±–µ—Ä–µ–º—Å—è —Å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º —ç—Ç–æ–≥–æ –ø–æ–ª—è.

### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–∏—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª

–ö–∞–∫ —Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ? –û–¥–Ω–∏–º –∏–∑ —Ä–µ—à–µ–Ω–∏–π —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞ –≤ –≤–∏–¥–µ –º–∞—Å—Å–∏–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ü–∏—Ñ—Ä. –î–ª—è –Ω–∞–∏–±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ –º—ã –º–æ–∂–µ–º –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à–µ —á–∏—Å–ª–æ –∏–∑ –¥–µ—Å—è—Ç–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å—á–∏—Å–ª–µ–Ω–∏—è –≤ —Å–∏—Å—Ç–µ–º—É —Å—á–∏—Å–ª–µ–Ω–∏—è –ø–æ –æ—Å–Ω–æ–≤–∞–Ω–∏—é $$2^{30}$$, –≤ —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω ¬´—Ü–∏—Ñ—Ä–æ–π¬ª –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç $$0$$ –¥–æ $$2^{30} - 1$$. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Python –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–ª–∏ 32-–±–∏—Ç–Ω—ã–µ –±–µ–∑–∑–Ω–∞–∫–æ–≤—ã–µ –º–∞—Å—Å–∏–≤—ã —Å 30-–±–∏—Ç–Ω—ã–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏ –∏–ª–∏ 16-–±–∏—Ç–Ω—ã–µ –±–µ–∑–∑–Ω–∞–∫–æ–≤—ã–µ –º–∞—Å—Å–∏–≤—ã —Å 15-–±–∏—Ç–Ω—ã–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –±–æ–ª—å—à–∏—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª —Å–≤—è–∑–∞–Ω —Å [–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏](https://github.com/python/cpython/blob/865e4b4f630e2ae91e61239258abb58b488f1d65/Include/longintrepr.h#L9), –∫–æ—Ç–æ—Ä—ã–µ –∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤—Å–µ –±–∏—Ç—ã. –ü–æ–ª–µ `ob_digit` —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ–∫–∞–∑–∞–Ω–Ω–æ–π –≤—ã—à–µ, —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–∞–∫–∏–µ –º–∞—Å—Å–∏–≤—ã —Ü–∏—Ñ—Ä. 

–î–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –ª–∏—à–Ω–∏—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –≤ CPython –µ—Å—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç $$-2^{30}$$ –¥–æ $$2^{30}$$. –¢–∞–∫–∏–µ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ –º–∞—Å—Å–∏–≤—ã —Å –æ–¥–Ω–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º, —Ç–æ –µ—Å—Ç—å, —Å–æ—Å—Ç–æ—è—â–∏–µ –∏–∑ –æ–¥–Ω–æ–π —Ü–∏—Ñ—Ä—ã.

–¢–∞–∫–∂–µ —Å–ª–µ–¥—É–µ—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∑–Ω–∞–∫–∞ —á–∏—Å–ª–∞ (—Ç.–µ. –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∑–Ω–∞–∫–æ–≤–æ–≥–æ –±–∏—Ç–∞), –∑–Ω–∞–∫ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ø–æ–ª–µ `ob_size`, –∫–æ—Ç–æ—Ä–æ–µ —Ç–∞–∫–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ `ob_digit`. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –∏–∑–º–µ–Ω–∏—Ç—å –∑–Ω–∞–∫ —Ü–µ–ª–æ–≥–æ —Å —Ä–∞–∑–º–µ—Ä–æ–º `ob_size=2` (–¥–≤–µ —Ü–∏—Ñ—Ä—ã), —Ç–æ `ob_size` —Å—Ç–∞–Ω–µ—Ç —Ä–∞–≤–Ω—ã–º `-2`.

–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏–∑ –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –ø–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—é —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª:

```c
/* Long integer representation.
   The absolute value of a number is equal to
   SUM(for i=0 through abs(ob_size)-1) ob_digit[i] * 2**(SHIFT*i)
   Negative numbers are represented with ob_size < 0;
   zero is represented by ob_size == 0.
   In a normalized number, ob_digit[abs(ob_size)-1] (the most significant
   digit) is never zero.  Also, in all cases, for all valid i,
   0 <= ob_digit[i] <= MASK.
   The allocation function takes care of allocating extra memory
   so that ob_digit[0] ... ob_digit[abs(ob_size)-1] are actually available.

   CAUTION:  Generic code manipulating subtypes of PyVarObject has to aware that integers abuse  ob_size's sign bit.
*/
```

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–∏–º–µ—Ä –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–ª–∏–Ω–Ω–æ–≥–æ —Ü–µ–ª–æ–≥–æ –≤ –º–∞—Å—Å–∏–≤ –∏ –æ–±—Ä–∞—Ç–Ω–æ. –ü—É—Å—Ç—å —É –Ω–∞—Å –∏–º–µ–µ—Ç—Å—è —Å–ª–µ–¥—É—é—â–µ–µ —á–∏—Å–ª–æ: $$123456789101112131415$$. –ü–µ—Ä–µ–≤–µ–¥–µ–º –µ–≥–æ –≤ —Å–∏—Å—Ç–µ–º—É —Å—á–∏—Å–ª–µ–Ω–∏—è –ø–æ –æ—Å–Ω–æ–≤–∞–Ω–∏—é $$2^{30}$$, –ø—É—Ç–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –¥–µ–ª–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ –æ—Å—Ç–∞—Ç–∫–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏—è:

**<span style="color: red">TODO: –í—Å—Ç–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–∏–Ω–∫—É —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º –¥–µ–ª–µ–Ω–∏—è –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π PyLongObject</span>**

–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —á–∏—Å–ª–æ –æ–±—Ä–∞—Ç–Ω–æ —Ç–∞–∫–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ:

$$(437976919 ‚àó 2^{30 ‚àó 0}) + (87719511 ‚àó 2^{30 ‚àó 1}) + (107 ‚àó 2^{30 ‚àó 2}) = 123456789101112131415$$

### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–ª–∏–Ω–Ω–æ–≥–æ —Ü–µ–ª–æ–≥–æ –≤ –º–∞—Å—Å–∏–≤

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–∏—Ö —á–∏—Å–µ–ª:

```python
SHIFT = 30  # –ß–∏—Å–ª–æ –±–∏—Ç –ø–æ–¥ –∫–∞–∂–¥—É—é ¬´—Ü–∏—Ñ—Ä—É¬ª
MASK = (2 ** SHIFT)

def split_number(bignum):
    t = abs(bignum)

    num_list = []
    while t != 0:
        # –í–∑—è—Ç–∏–µ –æ—Å—Ç–∞—Ç–∫–∞ –æ—Ç –¥–µ–ª–µ–Ω–∏—è
        small_int = t % MASK  # –ü–æ–±–∏—Ç–æ–≤—ã–π –∞–Ω–∞–ª–æ–≥: (t & (MASK-1))
        num_list.append(small_int)

        # –í–∑—è—Ç–∏–µ —Ü–µ–ª–æ–π —á–∞—Å—Ç–∏ –æ—Ç –¥–µ–ª–µ–Ω–∏—è
        t = t // MASK  # –ü–æ–±–∏—Ç–æ–≤—ã–π –∞–Ω–∞–ª–æ–≥: t >>= SHIFT

    return num_list

def restore_number(num_list):
    bignum = 0
    for i, n in enumerate(num_list):
        bignum += n * (2 ** (SHIFT * i))
    return bignum
```

```python
>>> bignum = 123456789101112131415
>>> num_list = split_number(bignum)
>>> num_list
[437976919, 87719511, 107]
>>> bignum == restore_number(num_list)
True
```

–ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–∏–≥–¥–µ –Ω–µ –æ—à–∏–±–ª–∏—Å—å, —Ç–æ –º–æ–∂–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞ —Å –ø–æ–º–æ—â—å—é –º–æ–¥—É–ª—è [ctypes](https://docs.python.org/3/library/ctypes.html), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –°–∏-–∫–æ–¥–æ–º –∏–∑ Python:

```python
import ctypes

class PyLongObject(ctypes.Structure):
    _fields_ = [("ob_refcnt", ctypes.c_ssize_t),
                ("ob_type", ctypes.c_void_p),
                ("ob_size", ctypes.c_ssize_t),
                ("ob_digit", ctypes.c_uint * 3)]
```
```python
>>> bignum = 123456789101112131415
>>> for i,d in enumerate(PyLongObject.from_address(id(bignum)).ob_digit):
...    print(f"ob_digit[{i}] = {d}")
ob_digit[0] = 437976919
ob_digit[1] = 87719511
ob_digit[2] = 107
>>> print("ob_size:", PyLongObject.from_address(id(bignum)).ob_size)
ob_size: 3
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

–ù–µ–±–æ–ª—å—à–∏–µ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç `-5` –¥–æ `256` –ø—Ä–µ–∞–ª–ª–æ—Ü–∏—Ä—É—é—Ç—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞. –¢–∞–∫ –∫–∞–∫ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ —è–≤–ª—è—é—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º–∏, —Ç–æ –º—ã –º–æ–∂–µ–º –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å –∏—Ö –∫–∞–∫ [—Å–∏–Ω–≥–ª—Ç–æ–Ω—ã](https://en.wikipedia.org/wiki/Singleton_pattern). –ö–∞–∂–¥—ã–π —Ä–∞–∑, –∫–æ–≥–¥–∞ –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–µ–∫–æ—Ç–æ—Ä–æ–π –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏), —Ç–æ –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, Python –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —É–∂–µ –ø—Ä–µ–∞–ª–ª–æ—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ–±—ä–µ–∫—Ç. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç—Ä–µ–±–ª—è–µ–º–æ–π –ø–∞–º—è—Ç–∏ –∏ –≤—Ä–µ–º—è –∑–∞—Ç—Ä–∞—á–∏–≤–∞–µ–º–æ–µ –Ω–∞ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –Ω–µ–±–æ–ª—å—à–∏–º–∏ —Ü–µ–ª—ã–º–∏ —á–∏—Å–ª–∞–º–∏.

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä:

```python
>>> a = 2
>>> id(a)
94220163919104
>>> a = a + 1
>>> id(a)
94220163919136
>>> b = 2
>>> id(b)
94220163919104
```

–°–ª–µ–¥—É–µ—Ç –∏–º–µ—Ç—å –≤–≤–∏–¥—É, —á—Ç–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `PyLongObject` –∑–∞–Ω–∏–º–∞–µ—Ç –Ω–µ –º–µ–Ω–µ–µ 28 –±–∞–π—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞, —Ç–æ –µ—Å—Ç—å –≤ —Ç—Ä–∏ —Ä–∞–∑–∞ –±–æ–ª—å—à–µ —á–µ–º —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥ 64-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ –≤ —è–∑—ã–∫–µ C.


```python
>>> import sys
>>> sys.getsizeof(1)
28
```

–ò–∑ —á–µ–≥–æ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è —Ç–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä? –£–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `_typeobject` –∑–∞–Ω–∏–º–∞–µ—Ç –≤–æ—Å–µ–º—å –±–∞–π—Ç, —Ç–∞–∫–∂–µ –ø–æ –≤–æ—Å–µ–º—å –±–∞–π—Ç –∑–∞–Ω–∏–º–∞—é—Ç –ø–æ–ª—è `ob_refcnt` –∏ `ob_size`, —á—Ç–æ —É–∂–µ –≤ —Å—É–º–º–µ –¥–∞–µ—Ç –Ω–∞–º 24 –±–∞–π—Ç–∞. –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ `ob_digit` —ç—Ç–æ –µ—â–µ —á–µ—Ç—ã—Ä–µ –±–∞–π—Ç–∞. –ò—Ç–æ–≥–æ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö —Ü–µ–ª—ã—Ö —á–∏—Å–µ–ª —Ç—Ä–µ–±—É–µ—Ç—Å—è 28 –±–∞–π—Ç. –ù–æ –µ—Å—Ç—å –æ–¥–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ - [–Ω–æ–ª—å](https://stackoverflow.com/a/10365639/1724257):

```python
>>> import sys
>>> sys.getsizeof(0)
24
```

### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

–ë–∞–∑–æ–≤—ã–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ç–æ–º—É, –∫–∞–∫ –º—ã —ç—Ç–æ –¥–µ–ª–∞–ª–∏ –∫–æ–≥–¥–∞-—Ç–æ –≤ —à–∫–æ–ª–µ, —Å –æ–¥–Ω–∏–º –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º: –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–∞—Å—Å–∏–≤–∞ —Å—á–∏—Ç–∞–µ—Ç—Å—è ¬´—Ü–∏—Ñ—Ä–æ–π¬ª.

–î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–∞—Ä–∏–∞–Ω—Ç –∞–ª–≥–æ—Ä–∏—Ç–º–∞ —Å–ª–æ–∂–µ–Ω–∏—è —Å [–ø–µ—Ä–µ–Ω–æ—Å–æ–º]( https://en.wikipedia.org/wiki/Carry_(arithmetic)):

```python
def add_bignum(a, b):
    z = []

    if len(a) < len(b):
        # –£–±–µ–¥–∏–º—Å—è, —á—Ç–æ –≤ ¬´a¬ª –Ω–∞–∏–±–æ–ª—å—à–µ–µ –∏–∑ –¥–≤—É—Ö –∑–Ω–∞—á–µ–Ω–∏–π
        a, b = b, a

    carry = 0

    for i in range(0, len(b)):
        carry += a[i] + b[i]
        z.append(carry % MASK)
        carry = carry // MASK

    for i in range(i + 1, len(a)):
        carry += a[i]
        z.append(carry % MASK)
        carry = carry // MASK

    z.append(carry)

    # –£–¥–∞–ª–∏–º –∑–∞–≤–µ—Ä—à–∞—é—â–∏–µ –Ω—É–ª–∏
    i = len(z)
    while i > 0 and z[i-1] == 0:
        i -= 1
    z = z[0:i]

    return z
```

```python
>>> a = 8223372036854775807
>>> b = 100037203685477
>>> restore_number(add_bignum(split_number(a), split_number(b))) == a + b
True
```

### –ó–∞–º–µ—á–∞–Ω–∏–µ –ø—Ä–æ Numpy –∏ Pandas

<div class="admonition legend">
  <p class="first admonition-title"><strong>–ó–∞–º–µ—á–∞–Ω–∏–µ</strong></p>
  <p class="last">–°–º. <a href="http://mortada.net/can-integer-operations-overflow-in-python.html">¬´Can integer operations overflow in Python¬ª</a>.</p>
</div>

–í —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –º—ã –ø–æ–ª—å–∑—É–µ–º—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ numpy/scipy/pandas –∏ —Ç.–¥., –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ü–µ–ª—ã–º–∏ —á–∏—Å–ª–∞–º–∏, —Ç–∞–∫ –∫–∞–∫ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –ª–µ–∂–∞—â–∏–µ –≤ –æ—Å–Ω–æ–≤–µ —ç—Ç–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫, –¥–ª—è –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏, –ø–æ–ª–∞–≥–∞—é—Ç—Å—è –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –°-—Ç–∏–ø—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏:

```python
>>> import numpy as np
>>> ar = np.array([2**63 - 1, 2**63 - 1])
>>> ar
array([9223372036854775807, 9223372036854775807])
>>> ar.dtype
dtype('int64')
```

–≠–ª–µ–º–µ–Ω—Ç–∞–º–∏ `ndarray` —è–≤–ª—è—é—Ç—Å—è 64-–±–∏—Ç–Ω—ã–µ –∑–Ω–∞–∫–æ–≤—ã–µ —Ü–µ–ª—ã–µ, —Ç–∞–∫–∏–º –æ–±—Ä–∑–∞–æ–º, $$2^{63}-1$$ –Ω–∞–∏–±–æ–ª—å—à–µ–µ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –º–æ–∂–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –≤ `ndarray`. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ 1 –ø—Ä–∏–≤–µ–¥–µ—Ç –∫  –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—é (overflow):

```python
>>> ar + 1
array([-9223372036854775808, -9223372036854775808])
>>> np.sum(ar)
-2
```

–ü—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ —Å—Ä–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞ —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –∫ —Ç–∏–ø—É `float` –∏ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç:

```python
>>> np.mean(ar)
9.2233720368547758e+18
```

### –ß–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç IEEE-754

–í–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —á–∏—Å–ª–∞ –≤ CPython –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
    
```c
typedef struct {
    PyObject_HEAD
    double ob_fval;
} PyFloatObject;
```

–õ–µ–≥–∫–æ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –ø–æ–ª–µ `ob_fval` —ç—Ç–æ –æ–±—ã—á–Ω–æ–µ –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ –¥–≤–æ–π–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏. –í—Å–µ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏ –≤ Python —è–≤–ª—è—é—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–º–∏ –æ–±–µ—Ä—Ç–∫–∞–º–∏ –Ω–∞–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –≤ –°–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–µ—Ä–∞—Ü–∏—è [—Å–ª–æ–∂–µ–Ω–∏—è](https://github.com/python/cpython/blob/master/Objects/floatobject.c#L534) –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```c
static PyObject *
float_add(PyObject *v, PyObject *w)
{
    double a,b;
    CONVERT_TO_DOUBLE(v, a);
    CONVERT_TO_DOUBLE(w, b);
    PyFPE_START_PROTECT("add", return 0)
    a = a + b;
    PyFPE_END_PROTECT(a)
    return PyFloat_FromDouble(a);
}
```

–°–ª–µ–¥—É–µ—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –≤—Å–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤ –≤–µ—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∏—Å–ª–∞—Ö –¥–µ–ª–∞—é—Ç—Å—è –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º —Å –Ω–µ–∫–æ—Ç–æ—Ä–æ–π –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é (—Å–º. —Å—Ç–∞–Ω–¥–∞—Ä—Ç [IEEE-754](http://www.softelectro.ru/ieee754.html)), –ø–æ—ç—Ç–æ–º—É –∑–∞—á–∞—Å—Ç—É—é –≤–º–µ—Å—Ç–æ ¬´—á–µ—Å—Ç–Ω—ã—Ö¬ª –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ–ª—É—á–∞—é—Ç—Å—è –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω—ã–µ (–∫ —ç—Ç–æ–º—É –Ω–∞–¥–æ –±—ã—Ç—å –≥–æ—Ç–æ–≤—ã–º), –Ω–∞–ø—Ä–∏–º–µ—Ä:

```python
>>> 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1 + 0.1
0.9999999999999999
```

–ï—Å–ª–∏ –≤—ã –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç–µ –ø–æ—á–µ–º—É –º—ã –Ω–µ –ø–æ–ª—É—á–∏–ª–∏ –µ–¥–∏–Ω–∏—Ü—É, —Ç–æ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —á–∏—Å–ª–æ $$0.1$$ –≤ –¥–≤–æ–∏—á–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Å—á–∏—Å–ª–µ–Ω–∏—è:

$$0.1 = \frac{1}{10} = 0*2^{-1} + 0*2^{-2} + 0*2^{-3} + 1*2^{-4} + 1*2^{-5} + ... = 00011(0011)$$

–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö –Ω–∞ –ø–æ–º–æ—â—å –º–æ–∂–µ—Ç –ø—Ä–∏–¥—Ç–∏ –º–æ–¥—É–ª—å `fmath`:

```python
>>> from math import fsum
>>> sum([0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1])
0.9999999999999999
>>> fsum([0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1, 0.1])
1.0
```

### –ë—É–ª–µ–≤—ã–π —Ç–∏–ø


```python
>>> to_be = True
>>> to_be or not to_be
True
```

```python
>>> is_leap = (year % 4 == 0 and year % 100 != 0) or (year % 400 == 0)
>>> is_leap
False
```

```python
>>> True or abrakadabra_or_lazy_evaluation
True
```

```python
>>> isinstance(True, bool) and isinstance(True, int)
True
```

### –°—Ç—Ä–æ–∫–∏

–°—Ç—Ä–æ–∫–∏ –≤ Python –≤–µ—Ä—Å–∏–∏ 3 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏–º–≤–æ–ª–æ–≤ –Æ–Ω–∏–∫–æ–¥ (code point'–æ–≤). –ï—Å–ª–∏ –≤—ã –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —Å–ª—ã—à–∞–ª–∏ –ø—Ä–æ –Æ–Ω–∏–∫–æ–¥ –∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –∏–ª–∏ –ø–ª–æ—Ö–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ, —Ç–æ —Å–æ–≤–µ—Ç—É—é –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â—É—é [—Å—Ç–∞—Ç—å—é](http://kunststube.net/encoding/) David C. Zentgraf –∏–∑ —Å–µ—Ä–∏–∏ ¬´–ß—Ç–æ –∫–∞–∂–¥—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å –æ...¬ª.

–ù–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å —Å –ø–æ–º–æ—â—å—é –æ–¥–∏–Ω–∞—Ä–Ω—ã—Ö –∏–ª–∏ –¥–≤–æ–π–Ω—ã—Ö –∫–∞–≤—ã—á–µ–∫ (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏ —Ç—Ä–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏, –Ω–æ —á–∞—â–µ –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π, –∫–ª–∞—Å—Å–æ–≤, –º–æ–¥—É–ª–µ–π):

```python
>>> first_name = 'Dmitrii'
>>> last_name = 'Sorokin'
>>> email = 'Dementiy@yandex.ru'
```

–î–ª—è —Å—Ç—Ä–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è —Å–ª–æ–∂–µ–Ω–∏—è (–∫–æ–Ω–∫–∞–Ω—Ç–µ–Ω–∞—Ü–∏–∏):

```python
>>> full_name = first_name + ' ' + last_name
>>> full_name
'Dmitrii Sorokin'
```

–°–ª–µ–¥—É–µ—Ç –∏–º–µ—Ç—å –≤–≤–∏–¥—É, —á—Ç–æ –≤ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ, –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –æ–±—ä–µ–∫—Ç, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –∏–º–µ–Ω–∏ –∏ –ø—Ä–æ–±–µ–ª–∞. –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ —Å—Ç—Ä–æ–∫, —Ç–æ –≤–º–µ—Å—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ —Å–ª–æ–∂–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤—Ç–∞—å –º–µ—Ç–æ–¥ `join()`, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º - –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ—Ö–æ–¥ –ø–æ –≤—Å–µ–º —Å—Ç—Ä–æ–∫–∞–º —Å—É–º–º–∏—Ä—É—è –∏—Ö –¥–ª–∏–Ω—ã, –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –ø–∞–º—è—Ç—å –ø–æ–¥ –Ω–æ–≤—ã–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫–∏, –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –µ—â–µ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥ –ø–æ –≤—Å–µ–º —Å—Ç—Ä–æ–∫–∞–º –∫–æ–ø–∏—Ä—É—è –∏—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –≤ –Ω–æ–≤—ã–π –æ–±—ä–µ–∫—Ç, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤:

```python
>>> full_name = ' '.join([first_name, last_name])
>>> full_name
'Dmitrii Sorokin'
```

–ó–¥–µ—Å—å –º—ã –ø–µ—Ä–≤—ã–π —Ä–∞–∑ —Å—Ç–∞–ª–∫–∏–≤–∞–µ–º—Å—è —Å –≤—ã–∑–æ–≤–æ–º –º–µ—Ç–æ–¥–∞ —É –æ–±—ä–µ–∫—Ç–∞. –î–∞–≤–∞–π—Ç–µ –≤—Å–ø–æ–º–Ω–∏–º, —á—Ç–æ –≤ Python –≤—Å–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç–æ–º. –ö–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–º–µ—Ç–æ–¥—ã) –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–∏–º, –∞ —Ç–∞–∫–∂–µ —Ö—Ä–∞–Ω–∏—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ –º–µ—Ç–æ–¥–∞–º –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞ (–∞—Ç—Ä–∏–±—É—Ç–∞–º) –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —á–µ—Ä–µ–∑ —Ç–æ—á–∫—É, –∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ –≤—ã—à–µ —Å –º–µ—Ç–æ–¥–æ–º `join()`.

–°—Ç—Ä–æ–∫—É –º–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ —Å–ø–∏—Å–æ–∫ –ø–æ–¥—Å—Ç—Ä–æ–∫ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—é, –∫–æ—Ç–æ—Ä—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —Ç–∞–∫–∂–µ —è–≤–ª—è–µ—Ç—Å—è —Å—Ç—Ä–æ–∫–æ–π:

```python
>>> email.split('@')
['Dementiy', 'yandex.ru']
>>> username, domain = email.split('@')
>>> username
'Dementiy'
>>> domain
'yandex.ru'
```

–ó–∞–∫–∞–Ω—á–∏–≤–∞–µ—Ç—Å—è –ª–∏ —Å—Ç—Ä–æ–∫–∞ –¥–∞–Ω–Ω–æ–π –ø–æ–¥—Å—Ç—Ä–æ–∫–æ–π:

```python
>>> email.endswith('yandex.ru')
True
```

–£ —Å—Ç—Ä–æ–∫ (–∫–∞–∫ –∏ —É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤) –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–ª–∏–Ω—É (—á–∏—Å–ª–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ):

```python
>>> len(full_name) # --> full_name.__len__()
15
```

–ú–æ–∂–Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –æ—Ç–¥–µ–ª—å–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Å—Ç—Ä–æ–∫—É –∏–∑ –æ–¥–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞:

```python
>>> first_name[0]
'D'
>>> first_name[-1]
'i'
```

–°—Ç—Ä–æ–∫–∏ —è–≤–ª—è—é—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–º–∏, —Ç–æ –µ—Å—Ç—å –º—ã –Ω–µ –º–æ–∂–µ–º –∏–∑–º–µ–Ω–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å—Ç—Ä–æ–∫–∏:

```python
>>> first_name[-1] = 'y'
...
TypeError: 'str' object does not support item assignment
```

–ò –Ω–∞–∫–æ–Ω–µ—Ü –º—ã –º–æ–∂–µ–º –±—Ä–∞—Ç—å –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–æ (—Å—Ä–µ–∑) —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å—Ç—Ä–æ–∫–∏:

```python
>>> email[:email.index('@')]
'Dementiy'
```

–°–∏–Ω—Ç–∞–∫—Å–∏—Å –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ä–µ–∑–æ–≤ —Å–ª–µ–¥—É—é—â–∏–π: `sequence[start:stop:step]`, –≥–¥–µ:
- `sequence` - –æ–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–∞–ª–∏–∑—É–µ—Ç Sequence –ø—Ä–æ—Ç–æ–∫–æ–ª;
- `start` - –ª–µ–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ —Å—Ä–µ–∑–∞, –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—É—â–µ–Ω–∞, —Ç–æ–≥–¥–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–π $$0$$;
- `stop` - –ø—Ä–∞–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ —Å—Ä–µ–∑–∞ –º–∏–Ω—É—Å $$1$$, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–∞–≤–∞—è –≥—Ä–∞–Ω–∏—Ü–∞ –Ω–µ –≤–∫–ª—é—á–∞–µ—Ç—Å—è; –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—É—â–µ–Ω–∞, —Ç–æ–≥–¥–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —Ä–∞–≤–Ω–æ–π `len(sequence)`;
- `step` - —à–∞–≥, —Å –∫–æ—Ç–æ—Ä—ã–º –ø–µ—Ä–µ–º–µ—â–∞–µ–º—Å—è –ø–æ `sequence`, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, —Ç–æ —Å—á–∏—Ç–∞–µ—Ç—Å—è —Ä–∞–≤–Ω—ã–º $$1$$.

–ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –ª–∏—à—å –Ω–µ–±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–∞–¥ —Å—Ç—Ä–æ–∫–∞–º–∏. –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ü–∏–π –≤—ã –≤—Å–µ–≥–¥–∞ –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫

–ö–∞–∫ —É–∂–µ –±—ã–ª–æ —Å–∫–∞–∑–∞–Ω–æ, —Å—Ç—Ä–æ–∫–∏ –≤ Python —è–≤–ª—è—é—Ç—Å—è –Æ–Ω–∏–∫–æ–¥ —Å—Ç—Ä–æ–∫–∞–º–∏. –î–ª—è –≤–Ω—Ç—É—Ä–µ–Ω–Ω–µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ –≤ Python, –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Ä—Å–∏–∏ 3.3 (—Å–º. [PEP-393](https://www.python.org/dev/peps/pep-0393/)), –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–æ–¥–∏—Ä–æ–≤–∫–∏ Latin-1 (1 –±–∞–π—Ç –Ω–∞ —Å–∏–º–≤–æ–ª), UCS-2 (2 –±–∞–π—Ç–∞ –Ω–∞ —Å–∏–º–≤–æ–ª) –∏ UCS-4 (4 –±–∞–π—Ç–∞ –Ω–∞ —Å–∏–º–≤–æ–ª). –£–ø—Ä–æ—â–µ–Ω–Ω–æ –ø—Ä–æ—Ü–µ—Å—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–¥–∏—Ä–æ–≤–∫–∏ —Å–ª–µ–¥—É—é—â–∏–π: –∫–æ–≥–¥–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–æ–∫–æ–≤—ã–π –æ–±—ä–µ–∫—Ç (—Ç–µ–∫—Å—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º –æ–±—ã—á–Ω–æ –≤ –∫–æ–¥–∏—Ä–æ–≤–∫–µ UTF-8), Python –Ω–∞—Ö–æ–¥–∏—Ç —Å–∞–º—ã–π —Å—Ç–∞—Ä—à–∏–π –∫–æ–¥–æ–≤—ã–π –∑–Ω–∞–∫ (code point) –≤ —Å—Ç—Ä–æ–∫–µ –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –∫–æ–¥–∏—Ä–æ–∫—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –∫–æ–¥–æ–≤—ã–π –∑–Ω–∞–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω ¬´–∫–∞–∫ –µ—Å—Ç—å¬ª.

–°—Ç—Ä–æ–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –Ω–µ –æ–¥–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, –∞ ¬´–∏–µ—Ä–∞—Ä—Ö–∏–µ–π¬ª –∏–∑ —Ç—Ä–µ—Ö [—Å—Ç—Ä—É–∫—Ç—É—Ä](https://github.com/python/cpython/blob/master/Include/unicodeobject.h#L197), –Ω–µ —Å—á–∏—Ç–∞—è `PyObject`. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ–¥–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É - `PyASCIIObject`, –∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –±–æ–ª—å—à—É—é —á–∞—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—Ä–æ–∫–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–∞–∫–∞—è –∫–æ–¥–∏—Ä–æ–≤–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫–∏, –¥–ª–∏–Ω—É —Å—Ç—Ä–æ–∫–∏ (—á–∏—Å–ª–æ –∫–æ–¥–æ–≤—ã—Ö –∑–Ω–∞–∫–æ–≤), —Å–æ—Å—Ç–æ–∏—Ç –ª–∏ —Å—Ç—Ä–æ–∫–∞ —Ç–æ–ª—å–∫–æ –∏–∑ ASCII-—Å–∏–º–≤–æ–ª–æ–≤, –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ –Ω–µ—Ç –∏ —Ç.–¥.

–û–ø–∏—à–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É `PyASCIIObject` —Å –ø–æ–º–æ—â—å—é –º–æ–¥—É–ª—è `ctypes`:

```python
import ctypes

class PyASCIIObject(ctypes.Structure):
    _fields_ = [("ob_refcnt", ctypes.c_ssize_t),
                ("ob_type", ctypes.py_object),
                ("length", ctypes.c_ssize_t),
                ("hash", ctypes.c_ssize_t),
                ("interned", ctypes.c_uint, 2),
                ("kind", ctypes.c_uint, 3),
                ("compact", ctypes.c_uint, 1),
                ("ascii", ctypes.c_uint, 1),
                ("ready", ctypes.c_uint, 1),
                ('wstr', ctypes.c_wchar_p)]

def get_string_kind(string):
    return PyUnicodeObject.from_address(id(string)).kind
```

–°–æ–∑–¥–∞–¥–∏–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤:

```python
>>> greet = 'Hello, world'
>>> greet
'Hello, world'
>>> len(greet)
12
>>> sys.getsizeof(greet)
61
>>> get_string_kind(greet)
1

>>> greet = 'Hello, ‰∏ñÁïå'
>>> greet
'Hello, ‰∏ñÁïå'
>>> len(greet)
9
>>> sys.getsizeof(greet)
92
>>> get_string_kind(greet)
2

>>> greet = 'Hello, \U0001F30D'
>>> greet
'Hello, üåç'
>>> len(greet)
8
>>> sys.getsizeof(greet)
108
>>> get_string_kind(greet)
4
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ö–æ—Ç—è –¥–ª–∏–Ω–∞ —Å—Ç—Ä–æ–∫ –∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –º–µ–Ω—å—à–µ, –Ω–æ –∑–∞–Ω–∏–º–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä –Ω–∞–æ–±–æ—Ä–æ—Ç —Ä–∞—Å—Ç–µ—Ç, —Ç–∞–∫ –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –∫–æ–¥–∏—Ä–æ–≤–∫–∏ –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è. –û–± —ç—Ç–æ–º –≤–∞–∂–Ω–æ –ø–æ–º–Ω–∏—Ç—å, –æ—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—ä–µ–º–∞–º–∏ —Ç–µ–∫—Å—Ç–æ–≤, —Ç–∞–∫ –∫–∞–∫ –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª —ç–º–æ–¥–∑–∏ –º–æ–∂–µ—Ç —É–≤–µ–ª–∏—á–∏—Ç—å –∑–∞–Ω–∏–º–∞–µ–º—ã–π —Ä–∞–∑–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –≤ 4 —Ä–∞–∑–∞.

–ü–æ—á–µ–º—É –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è UTF-8? –ö–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8 –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç, —á—Ç–æ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤–∞—Ä—å–∏—Ä—É–µ–º–æ–µ —á–∏—Å–ª–æ –±–∞–π—Ç (–æ—Ç –æ–¥–Ω–æ–≥–æ –¥–æ —á–µ—Ç—ã—Ä–µ—Ö) –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞. UTF-8 —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫ (—Ç–æ –µ—Å—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –ø–æ –ø–∞–º—è—Ç–∏), –Ω–æ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ –æ—Ç–¥–µ–ª—å–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–∞–º —Å—Ç—Ä–æ–∫–∏ (–ø—Ä–∏ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–∏), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ –≤—Å–µ–º —Å–∏–º–≤–æ–ª–∞–º —Å—Ç—Ä–æ–∫–∏ –ø–æ–∫–∞ –º—ã –Ω–µ –¥–æ–π–¥–µ–º –¥–æ –Ω—É–∂–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞. –ü—Ä–∏ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ —Ç–∞–∫–æ–π –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç, –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –Ω—É–∂–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ —Å–∏–º–≤–æ–ª–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω–¥–µ–∫—Å —É–º–Ω–æ–∂–∏—Ç—å –Ω–∞ —Ä–∞–∑–º–µ—Ä –∫–æ–¥–æ–≤–æ–≥–æ –∑–Ω–∞–∫–∞ (1, 2 –∏–ª–∏ 4 –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–∏). –¢–µ–º –Ω–µ –º–µ–Ω–µ–µ –µ—Å—Ç—å [–º–Ω–µ–Ω–∏–µ](http://utf8everywhere.org/), —á—Ç–æ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —ç—Ç–æ –Ω–µ –ø—Ä–æ–±–ª–µ–º–∞.

### –ò–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫

<div class="admonition legend">
  <p class="first admonition-title"><strong>–ó–∞–º–µ—á–∞–Ω–∏–µ</strong></p>
  <p class="last">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å <a href="http://guilload.com/python-string-interning/">—Ç—É—Ç</a> –∏ <a href="https://rushter.com/blog/python-strings-and-memory/">—Ç—É—Ç</a>.</p>
</div>

–î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏ –≤ Python —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ (string interning). –î–∞–≤–∞–π—Ç–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ç–∞–∫–æ–π –ø—Ä–∏–º–µ—Ä, –ø—É—Å—Ç—å —É –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:

```python
>>> s1 = "foo!"
>>> s2 = "foo!"
>>> s1 is s2
False
```

–•–æ—Ç—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å—Ç—Ä–æ–∫ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —ç—Ç–æ –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞. –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã:

```python
>>> s1 = "a"
>>> s2 = "a"
>>> s1 is s2
True
```

–ø–æ–ª—É—á–∏–º, —á—Ç–æ –∞–¥—Ä–µ—Å–∞ `s1` –∏ `s2` —Å–æ–≤–ø–∞–¥–∞—é—Ç. –í—Å–µ —Å—Ç—Ä–æ–∫–∏ –¥–ª–∏–Ω–æ–π 0 –∏–ª–∏ 1 –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω—ã, –∫—Ä–æ–º–µ —Ç–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–∏—Ä—É—é—Ç—Å—è –≤—Å–µ —Å—Ç—Ä–æ–∫–æ–≤—ã–µ –ª–∏—Ç–µ—Ä–∞–ª—ã, —Å–æ—Å—Ç–æ—è—â–∏–µ –∏–∑ —Å–∏–º–≤–æ–ª–æ–≤ –ª–∞—Ç–∏–Ω—Å–∫–æ–≥–æ –∞–ª—Ñ–∞–≤–∏—Ç–∞, —Ü–∏—Ñ—Ä –∏–ª–∏ –Ω–∏–∂–Ω–µ–≥–æ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è, —Ç–∞–∫–∂–µ –∏–Ω—Ç–µ—Ä–Ω–∏—Ä—É—é—Ç—Å—è –∏–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, —Ñ—É–Ω–∫—Ü–∏–π, –∫–ª–∞—Å—Å–æ–≤ –∏ —Ç.–¥. 

–ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥–µ–Ω —É–ø—Ä–æ—â–µ–Ω–Ω—ã–π [–∞–ª–≥–æ—Ä–∏—Ç–º –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω–∏—è](https://github.com/python/cpython/blob/master/Objects/unicodeobject.c#L15171):

```python
interned = None

def intern(string):
    global interned
    
    if string is None or not type(string) is str:
        raise TypeError

    if interned is None:
        interned = {}

    t = interned.get(string)
    if t is not None:
        return t

    interned[string] = string
    return string
```

–ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–∫—É, —Ç–æ —Å–ª–µ–¥—É–µ—Ç –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π `intern` –∏–∑ –º–æ–¥—É–ª—è `sys`:

```python
>>> import sys
>>> s1 = sys.intern("foo!")
>>> s2 = sys.intern("foo!")
>>> s1 is s2
True
```

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –Ω–µ –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–æ –¥–≤—É—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤. –ö–æ–≥–¥–∞ –≤—ã —Å–æ–∑–¥–∞–µ—Ç–µ –≤—Ç–æ—Ä–æ–π –æ–±—ä–µ–∫—Ç —Å —Ç–µ–º –∂–µ –∑–Ω–∞—á–µ–Ω–∏–µ–º, —á—Ç–æ –∏ —É —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –æ–±—ä–µ–∫—Ç–∞, —Ç–æ –≤—ã –ø–æ–ª—É—á–∞–µ—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –æ–±—ä–µ–∫—Ç. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∏–Ω—Ç–µ—Ä–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç–∫–æ–Ω–æ–º–∏—Ç—å –ø–∞–º—è—Ç—å –∏ –ø–æ–≤—ã—à–∞–µ—Ç —Å–∫–æ—Ä–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å—Ç—Ä–æ–∫, –ø—É—Ç–µ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∏—Ö –∞–¥—Ä–µ—Å–æ–≤ (—Ö–µ—à–µ–π), –∞ –Ω–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ.

### –°–ø–∏—Å–∫–∏

```python
>>> scores = []
>>> scores
[]
```

```python
>>> scores = [90.4, 83, 85, 72.3, 65, 84.5, 76, 80, 64.9, 61]
>>> scores
[90.4, 83, 85, 72.3, 65, 84.5, 76, 80, 64.9, 61]
```

```python
>>> scores[0]
90.4
```

```python
>>> len(scores)
10
```

```python
>>> mean_score = sum(scores) / len(scores)
>>> mean_score
```

```python
>>> scores.append(90)
>>> scores
[90.4, 83, 85, 72.3, 65, 84.5, 76, 80, 64.9, 61, 90]
```

```python
>>> scores.extend([58, 91.5, 79])
>>> scores
[90.4, 83, 85, 72.3, 65, 84.5, 76, 80, 64.9, 61, 90, 58, 91.5, 79]
```

```python
>>> scores_copy = scores.copy() # == scores[:] == list(scores)
>>> scores_copy
[90.4, 83, 85, 72.3, 65, 84.5, 76, 80, 64.9, 61, 90, 58, 91.5, 79]
```

```python
>>> sorted(scores, reverse=True)
```

### –°–ø–∏—Å–∫–∏ –∫–∞–∫ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –º–∞—Å—Å–∏–≤—ã

–°–ø–∏—Å–∫–∏ –≤ Python —è–≤–ª—è—é—Ç—Å—è –æ–±—ã—á–Ω—ã–º–∏ [–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏](https://en.wikipedia.org/wiki/Dynamic_array) (–≤–µ–∫—Ç–æ—Ä –≤ C++) –∏ –æ–±–ª–∞–¥–∞—é—Ç –≤—Å–µ–º–∏ –∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞–º–∏ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ —ç–ª–µ–º–µ–Ω—Ç—É –ø–æ –µ–≥–æ –∏–Ω–¥–µ–∫—Å—É –∏–º–µ–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å $$O(1)$$, –∞ –ø–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–º–µ–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å $$O(N)$$.

–°–ø–∏—Å–∫–∏ –≤ CPython –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Å –ø–æ–º–æ—â—å—é —Å–ª–µ–¥—É—é—â–µ–π [—Å—Ç—Ä—É–∫—Ç—É—Ä—ã](https://github.com/python/cpython/blob/master/Include/listobject.h#L23):

```c
typedef struct {
    PyObject_VAR_HEAD
    /* Vector of pointers to list elements.  list[0] is ob_item[0], etc. */
    PyObject **ob_item;

    /* ob_item contains space for 'allocated' elements.  The number
     * currently in use is ob_size.
     * Invariants:
     *     0 <= ob_size <= allocated
     *     len(list) == ob_size
     *     ob_item == NULL implies ob_size == allocated == 0
     * list.sort() temporarily sets allocated to -1 to detect mutations.
     *
     * Items must normally not be NULL, except during construction when
     * the list is not yet visible outside the function that builds it.
     */
    Py_ssize_t allocated;
} PyListObject;
```

–ì–¥–µ:
- `ob_item` - –º–∞—Å—Å–∏–≤ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ `PyObject`;
- `allocated` - –µ–º–∫–æ—Å—Ç—å —Å–ø–∏—Å–∫–∞ (—Ä–∞–∑–º–µ—Ä –±—É—Ñ—Ñ–µ—Ä–∞), —Ç–æ –µ—Å—Ç—å —Å–∫–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–æ–∂–Ω–æ –ø–æ–º–µ—Å—Ç–∏—Ç—å –≤ –º–∞—Å—Å–∏–≤ `ob_item` –¥–æ –µ–≥–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ `ob_size` - —Ç–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ.

![](/assets/images/lectures/lecture01-03.jpg)

```c
/* This over-allocates proportional to the list size, making room
 * for additional growth.  The over-allocation is mild, but is
 * enough to give linear-time amortized behavior over a long
 * sequence of appends() in the presence of a poorly-performing
 * system realloc().
 * The growth pattern is:  0, 4, 8, 16, 25, 35, 46, 58, 72, 88, ...
 * Note: new_allocated won't overflow because the largest possible value
 *       is PY_SSIZE_T_MAX * (9 / 8) + 6 which always fits in a size_t.
 */
new_allocated = (size_t)newsize + (newsize >> 3) + (newsize < 9 ? 3 : 6);
```

–î–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –≤ –¥–µ–π—Å—Ç–≤–∏–∏ —Å –ø–æ–º–æ—â—å—é –º–æ–¥—É–ª—è ctypes.

```python
class ListStruct(ctypes.Structure):
    _fields_ = [("ob_refcnt", ctypes.c_ssize_t),
                ("ob_type", ctypes.c_void_p),
                ("ob_size", ctypes.c_ssize_t),
                ("ob_item", ctypes.c_long),  # PyObject** pointer cast to long
                ("allocated", ctypes.c_ssize_t)]
    
    def __repr__(self):
        return f"ListStruct(ob_size={self.ob_size}, allocated={self.allocated})"
```

–°–æ–∑–¥–∞–¥–∏–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫:

```python
>>> L = []
>>> ls = ListStruct.from_address(id(L))
>>> ls
ListStruct(ob_size=0, allocated=0)
```

–ü—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –∏–º–µ–µ—Ç —Ä–∞–∑–º–µ—Ä –Ω–æ–ª—å –∏ –µ–º–∫–æ—Å—Ç—å –Ω–æ–ª—å. –î–æ–±–∞–≤–∏–º –æ–¥–∏–Ω —ç–ª–µ–º–µ–Ω—Ç:

```python
>>> L.append(1)
>>> ls
ListStruct(ob_size=1, allocated=4)
```

–ö–∞–∫ –º—ã –≤–∏–¥–∏–º –∏ —Ä–∞–∑–º–µ—Ä –∏ –µ–º–∫–æ—Å—Ç—å —Å–ø–∏—Å–∫–∞ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Å –ø—Ä–∞–≤–∏–ª–æ–º —Ä–æ—Å—Ç–∞.

```python
>>> L.extend([2,3,4])
>>> ls
ListStruct(ob_size=4, allocated=4)
>>> L.append(5)
>>> ls
ListStruct(ob_size=5, allocated=8)
```

![](/assets/images/lectures/lecture01-04.jpg)

### –ö–æ—Ä—Ç–µ–∂–∏

```python
point = (1, 2, 3)
point
```

```python
point[0] = 4
...
TypeError: 'tuple' object does not support item assignment
```

–ö–æ—Ä—Ç–µ–∂–∏ vs —Å–ø–∏—Å–∫–æ–≤:
- –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è, –∫–æ—Ä—Ç–µ–∂–∏ —Ç–∞–∫–∂–µ —è–≤–ª—è—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏.
- –ö–æ—Ä—Ç–µ–∂–∏ –∑–∞–Ω–∏–º–∞—é—Ç –º–µ–Ω—å—à–µ –º–µ—Å—Ç–∞ –≤ –ø–∞–º—è—Ç–∏, —Ç–∞–∫ –∫–∞–∫ –∏–º–µ—é—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –¥–ª–∏–Ω—É.
- –ö–æ—Ä—Ç–µ–∂–∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ (immutable) –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –≤—ã—Å—Ç—É–ø–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π —Å–ª–æ–≤–∞—Ä–µ–π –∏–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–Ω–æ–∂–µ—Å—Ç–≤.
- –ö–æ—Ä—Ç–µ–∂–∏ –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –æ–±–ª–∞–¥–∞—é—â–∏–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π.


```c
typedef struct {
    PyObject_VAR_HEAD
    PyObject *ob_item[1];

    /* ob_item contains space for 'ob_size' elements.
     * Items must normally not be NULL, except during construction when
     * the tuple is not yet visible outside the function that builds it.
     */
} PyTupleObject;
```


–í–æ–ø—Ä–æ—Å:
 - –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö([1,1,1,1,1]) = –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö((1,1,1,1,1))?
 - –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö([1,1,1,1,1]) > –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö((1,1,1,1,1))?
 - –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö([1,1,1,1,1]) < –†–∞–∑–º–µ—Ä –≤ –±–∞–π—Ç–∞—Ö((1,1,1,1,1))?

### –°–ª–æ–≤–∞—Ä–∏

–°–ª–æ–≤–∞—Ä–∏ —è–≤–ª—è—é—Ç—Å—è –æ–¥–Ω–æ–π –∏–∑ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –∏ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –≤ Python –∏ –º—ã —Å –Ω–∏–º–∏ –±—É–¥–µ–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—Å—Ç—Ä–µ—á–∞—Ç—å—Å—è. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–ø–∏—Å–∫–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è —É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–º–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—è–º–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞, —ç–ª–µ–º–µ–Ω—Ç—ã —Å–ª–æ–≤–∞—Ä—è —ç—Ç–æ –Ω–µ—É–ø–æ—Ä—è–¥–æ—á–µ–Ω–Ω—ã–µ(?) –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–∞—Ä *–∫–ª—é—á:–∑–Ω–∞—á–µ–Ω–∏–µ*.

–ò–Ω–æ–≥–¥–∞ —Å–ª–æ–≤–∞—Ä–∏ –Ω–∞–∑—ã–≤–∞—é—Ç [–∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–º–∏ –º–∞—Å—Å–∏–≤–∞–º–∏](https://ru.wikipedia.org/wiki/%D0%90%D1%81%D1%81%D0%BE%D1%86%D0%B8%D0%B0%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D0%B9_%D0%BC%D0%B0%D1%81%D1%81%D0%B8%D0%B2), –∏–Ω–æ–≥–¥–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ (–∏–º–µ–µ—Ç—Å—è –≤–≤–∏–¥—É –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –∫–ª—é—á–µ–π —Å–ª–æ–≤–∞—Ä—è –≤ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–π).

–ö–∞–∫ –∏ —Å–ø–∏—Å–∫–∏, —Å–ª–æ–≤–∞—Ä–∏ –∏–º–µ—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –¥–ª–∏–Ω—É, –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—É—é –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç—å –∏ –º–æ–≥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω—ã—Ö —Ç–∏–ø–æ–≤.

–°–æ–∑–¥–∞–¥–∏–º —Å–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –æ –Ω–∞—Å–µ–ª–µ–Ω–∏–∏ —Ä—è–¥–∞ —Å—Ç—Ä–∞–Ω (–∫–ª—é—á–∞–º–∏ –≤ —Ç–∞–∫–æ–º —Å–ª–æ–≤–∞—Ä–µ –±—É–¥—É—Ç —Å—Ç—Ä–∞–Ω—ã, –∞ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ - —Ä–∞–∑–º–µ—Ä –Ω–∞—Å–µ–ª–µ–Ω–∏—è):

```python
>>> population_by_countries = {
    'India': 1326801576,
    'Brazil': 209567920,
    'China': 1382323332,
    'Nigeria': 186987563,
    'Bangladesh': 162910864,
    'U.S.': 324118787,
    'Russia': 143439832,
    'Pakistan': 192826502,
    'Mexico': 128632004
}
```

–ò–Ω–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ —Å–ø–∏—Å–∫–∏ –∫–ª—é—á–µ–π –∏ –∑–Ω–∞—á–µ–Ω–∏–π, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –º—ã —Ö–æ—Ç–∏–º —Å–æ–∑–¥–∞—Ç—å —Å–ª–æ–≤–∞—Ä—å:

```python
>>> countries = ['India', 'Brazil', 'China', 'Nigeria', 'Bangladesh', 'U.S.', 'Russia', 'Pakistan', 'Mexico']
>>> populations = [1326801576, 209567920, 1382323332, 186987563, 162910864, 324118787, 143439832, 192826502, 128632004]
>>> dict(zip(countries, populations))
{'Bangladesh': 162910864,
 'Brazil': 209567920,
 'China': 1382323332,
 'India': 1326801576,
 'Mexico': 128632004,
 'Nigeria': 186987563,
 'Pakistan': 192826502,
 'Russia': 143439832,
 'U.S.': 324118787}
```

–û–±—Ä–∞—â–µ–Ω–∏–µ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º —Å–ª–æ–≤–∞—Ä—è –ø–æ—Ö–æ–∂–µ –Ω–∞ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π, —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–æ –∏–Ω–¥–µ–∫—Å–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–ª—é—á:

```python
>>> population_by_countries['Russia']
143439832
>>> population_by_countries['Russia'] = 143439832 + 1
>>> population_by_countries['Russia']
143439833
```

–î–æ–±–∞–≤–∏–º –Ω–æ–≤—É—é –ø–∞—Ä—É:

```python
>>> population_by_countries['Japan'] = 126323715
>>> population_by_countries
{'Bangladesh': 162910864,
 'Brazil': 209567920,
 'China': 1382323332,
 'India': 1326801576,
 'Japan': 126323715,
 'Mexico': 128632004,
 'Nigeria': 186987563,
 'Pakistan': 192826502,
 'Russia': 143439833,
 'U.S.': 324118787}
```

–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∏–∑–≤–ª–µ—á—å –∑–Ω–∞—á–µ–Ω–∏–µ —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–ª—é—á–æ–º, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è
–∏—Å–∫–ª—é—á–µ–Ω–∏–µ ¬´–ö–ª—é—á–∞ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç¬ª:

```python
>>> population_by_countries['Poland']
...
KeyError: 'Poland'
```

–° –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ `in` –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∫–ª—é—á –≤ —Å–ª–æ–≤–∞—Ä–µ. –û–ø–µ—Ä–∞—Ç–æ—Ä `in` —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–æ –≤—Å–µ–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏ (—Å—Ç—Ä–æ–∫–∏, —Å–ø–∏—Å–∫–∏, –∫–æ—Ä—Ç–µ–∂–∏, —Å–ª–æ–≤–∞—Ä–∏, –º–Ω–æ–∂–µ—Å—Ç–≤–∞), –Ω–æ –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π (—Å—Ç—Ä–æ–∫–∏, —Å–ø–∏—Å–∫–∏, –∫–æ—Ä—Ç–µ–∂–∏) —ç—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –º–µ–¥–ª–µ–Ω–Ω–æ–π:

```python
>>> "Russia" in population_by_countries
True
>>> "Poland" in population_by_countries
False
```

–ú–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –º–µ—Ç–æ–¥–æ–º `get`, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —É–∫–∞–∑–∞–≤ –∑–Ω–∞—á–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω–æ, –µ—Å–ª–∏ –∫–ª—é—á –Ω–µ –±—ã–ª –Ω–∞–π–¥–µ–Ω:

```python
>>> population_by_countries.get('Poland') # None
>>> population_by_countries.get('Poland', 'NA')
'NA'
```

–ò–Ω–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ ¬´—Å–ø–∏—Å–æ–∫¬ª –∫–ª—é—á–µ–π, –∑–Ω–∞—á–µ–Ω–∏–µ–π –∏–ª–∏ –∫–æ—Ä—Ç–µ–∂–µ–π (–∫–ª—é—á, –∑–Ω–∞—á–µ–Ω–∏–µ):

```python
>>> population_by_countries.keys()
dict_keys(['India', ..., 'Japan'])
>>> population_by_countries.values()
dict_values([1326801576, ..., 126323715])
>>> population_by_countries.items()
dict_items([('India', 1326801576), ..., ('Japan', 126323715)])
```

–í—ã –Ω–µ –º–æ–∂–µ—Ç–µ —É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å —Å–ª–æ–≤–∞—Ä—å –ø–æ –∫–ª—é—á–∞–º –∏–ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º, –Ω–æ –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ—Ä—Ç–µ–∂–µ–π –∏ —É–ø–æ—Ä—è–¥–æ—á–∏—Ç—å –µ–≥–æ:

```python
>>> from operator import itemgetter
>>> sorted(population_by_countries.items(), key=itemgetter(1), reverse=True)
[('China', 1382323332),
 ('India', 1326801576),
 ('U.S.', 324118787),
 ('Brazil', 209567920),
 ('Pakistan', 192826502),
 ('Nigeria', 186987563),
 ('Bangladesh', 162910864),
 ('Russia', 143439833),
 ('Mexico', 128632004),
 ('Japan', 126323715)]
```

–ó–∞—á–∞—Å—Ç—É—é —Å–ª–æ–≤–∞—Ä–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è –∫—É–¥–∞ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```python
>>> import requests
>>> response = requests.get('https://api.openweathermap.org/data/2.5/weather?q=Saint Petersburg&units=metric&APPID=a46b3bb83f9e16e2ee203e9ecfca99f8')
>>> response.json()
{'base': 'stations',
 'clouds': {'all': 75},
 'cod': 200,
 'coord': {'lat': 59.94, 'lon': 30.32},
 'dt': 1519380000,
 'id': 498817,
 'main': {'humidity': 85,
          'pressure': 1027,
          'temp': -11,
          'temp_max': -11,
          'temp_min': -11},
 'name': 'Saint Petersburg',
 'sys': {'country': 'RU',
         'id': 7267,
         'message': 0.0041,
         'sunrise': 1519362815,
         'sunset': 1519398694,
         'type': 1},
 'visibility': 9000,
 'weather': [{'description': 'light snow',
              'icon': '13d',
              'id': 600,
              'main': 'Snow'}],
 'wind': {'deg': 280, 'speed': 3}}
```

### –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ

–ú—ã –Ω–µ –±—É–¥–µ–º —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Å–ª–æ–≤–∞—Ä–µ–π, —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∏ —É—Å—Ç—Ä–æ–µ–Ω—ã –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–ª–æ–∂–Ω–µ–µ —á–µ–º –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ —Ä–∞–Ω–µ–µ. –î–ª—è –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö—Å—è –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—ã—Å—Ç—É–ø–ª–µ–Ω–∏—è [Raymond Hettinger](https://www.youtube.com/watch?v=p33CVV29OG8) –∏ [Brandon Rhodes](https://www.youtube.com/watch?v=66P5FMkWoVU) –æ —Ä–∞–±–æ—Ç–µ —Å–ª–æ–≤–∞—Ä–µ–π, –∏–ª–∏ –ø–æ—á–∏—Ç–∞—Ç—å –∏—Å—á–µ—Ä–ø—ã–≤–∞—é—â—É—é –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é [–î–º–∏—Ç—Ä–∏—è –ê–ª–∏–º–æ–≤–∞](https://www.slideshare.net/delimitry/python-dict-66233023) –æ–± —ç–≤–æ–ª—é—Ü–∏–∏ —Å–ª–æ–≤–∞—Ä–µ–π, –Ω–∞—á–∏–Ω–∞—è —Å Python 2.x.

–¢–µ–º –Ω–µ –º–µ–Ω–µ–µ —Å–ª–µ–¥—É–µ—Ç –∑–Ω–∞—Ç—å, —á—Ç–æ –∫–ª—é—á–∞–º–∏ —Å–ª–æ–≤–∞—Ä–µ–π –º–æ–≥—É—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ —Ö–µ—à–∏—Ä—É–µ–º—ã–µ –æ–±—ä–µ–∫—Ç—ã, —Ç–æ –µ—Å—Ç—å —Ç–µ –æ–±—ä–µ–∫—Ç—ã, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏—è (–æ–±—ã—á–Ω–æ —ç—Ç–æ —á–∏—Å–ª–∞, —Å—Ç—Ä–æ–∫–∏ –∏ –∫–æ—Ä—Ç–µ–∂–∏).

–°—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤–∏–¥–æ–≤ —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–π –∏ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –¥–∞—Ç—å –≤–∞–º –∏–Ω—Ç—É–∏—Ü–∏—é —Ç–æ–≥–æ, —á—Ç–æ –∏–∑ —Å–µ–±—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏—è, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–∏–º–µ—Ä —Å–ª–∞–±–æ–π —Ö–µ—à-—Ñ—É–Ω–∫—Ü–∏–∏ –∏ –µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

<iframe width="800" height="500" frameborder="0" src="https://pythontutor.com/iframe-embed.html#code=def%20my_hash%28astring%29%3A%0A%20%20%20%20h%20%3D%200%0A%20%20%20%20for%20pos%20in%20range%28len%28astring%29%29%3A%0A%20%20%20%20%20%20%20%20h%20%2B%3D%20pos%20*%20ord%28astring%5Bpos%5D%29%0A%20%20%20%20return%20h%0A%20%20%20%20%0AL%20%3D%20%5BNone,%20None,%20None,%20None,%20None%5D%0A%0Aindex%20%3D%20my_hash%28%22cat%22%29%20%25%20len%28L%29%20-%201%0AL%5Bindex%5D%20%3D%20%22cat%22%0A%0Aindex%20%3D%20my_hash%28%22dog%22%29%20%25%20len%28L%29%20-%201%0AL%5Bindex%5D%20%3D%20%22dog%22&codeDivHeight=400&codeDivWidth=350&cumulative=false&curInstr=0&heapPrimitives=false&origin=opt-frontend.js&py=3&rawInputLstJSON=%5B%5D&textReferences=false"> </iframe>

–§–∞–∫—Ç–∏—á–µ—Å–∫–∏ –º—ã –ø–æ–ª—É—á–∏–ª–∏ –æ—á–µ–Ω—å –Ω–∞–∏–≤–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é [—Ö–µ—à-—Ç–∞–±–ª–∏—Ü—ã](https://en.wikipedia.org/wiki/Hash_table) (—Å–ª–æ–≤–∞—Ä—è).

### –ú–Ω–æ–∂–µ—Å—Ç–≤–∞

```python
>>> a_set = {1, 2, 1, 3, 3, 4, 2, 5}
>>> a_set
{1, 2, 1, 3, 3, 4, 2, 5}
```

```python
>>> {1, 2, 1, 3, 3, 4, 2, 5} == {1, 2, 3, 4, 5}
True
```

```python
>>> 1 in a_set
True
>>> 6 in a_set
False
```

```python
>>> {1, 2, 3} | {1, 4, 5}
{1, 2, 3, 4, 5}
>>> {1, 2, 3} & {1, 4, 5}
{1}
>>> {1, 2, 3} - {1, 4, 5}
{2, 3}
```